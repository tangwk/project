webpackJsonp([19],{"16UQ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("IvJb"),n=a("Osha"),r=a("dC0T"),o=a("/p82");i.default.filter("dateFormat",function(e){var t=new Date(parseInt(e));return t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,"0")+"-"+t.getDate().toString().padStart(2,"0")});var s={name:"VideoModify",data:function(){return{videoName:"",videoTime:"",typeVal:"",address:"",videoContent:"",options:[{label:"类型1",value:"1"},{label:"类型2",value:"2"},{label:"类型3",value:"3"},{label:"类型4",value:"4"},{label:"类型5",value:"5"}],defaultMsg:"",config:{initialFrameWidth:null,initialFrameHeight:350},eDitor:"",edithtml:"",videoType:"videoType"}},methods:{toLook:function(){var e=this;o.a.getVideos({id:this.reportID}).then(function(t){var a=t.result;e.videoName=a.videoName,e.videoTime=e.formatDate(a.uploadDate),e.typeVal=a.videoType,e.address=a.mappingUrl,e.videoContent=a.videoContent,e.defaultMsg=a.videoContent}).catch(function(e){})},insertContent:function(e){this.eDitor=e},save:function(){var e=this,t=this.eDitor.getContent();this.videoContent=t,this.$validator.validateAll().then(function(t){t&&o.a.updateVideo({id:e.reportID,videoName:e.videoName,videoContent:e.videoContent,uploadDate:e.videoTime,videoType:e.typeVal,mappingId:e.address,releaseId:localStorage.getItem("userId"),releaseName:localStorage.getItem("userName"),type:1,mark:"0"}).then(function(t){e.$router.push("/layOut/video?currentPage="+e.$route.query.currentPage)})})},getTypeList:function(){var e=this;o.a.typeList({codeName:"",codeType:this.videoType,id:"",code:""}).then(function(t){var a=t.result;e.options=[],a&&(a.forEach(function(e){e.label=e.codeName,e.value=e.code}),e.options=a)})},goBack:function(){this.$router.push("/layOut/video?currentPage="+this.$route.query.currentPage)},formatDate:function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var n=t.getDate();return a+"-"+i+"-"+(n=n<10?"0"+n:n)+" "}},created:function(){this.reportID=this.$route.query.reportID,this.toLook(),this.getTypeList()},components:{commonBread:n.a,UE:r.a}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"boxBor"},[a("div",{staticClass:"crumbs"},[a("common-bread")],1),e._v(" "),a("div",{staticClass:"user"},[a("p",{staticClass:"titleBar"},[e._v("\n      视频修改\n    ")]),e._v(" "),a("ul",{staticClass:"newsBor"},[a("li",[e._m(0),e._v(" "),a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":e.errors.has("vidName")},attrs:{id:"title",name:"vidName"},model:{value:e.videoName,callback:function(t){e.videoName=t},expression:"videoName"}}),e._v(" "),a("p",{staticClass:"hint"},[e._v(" "+e._s(e.errors.first("vidName"))+" ")])],1),e._v(" "),a("li",{staticClass:"clear"},[a("div",{staticClass:"right"},[a("label",{attrs:{for:"time"}},[e._v("上传时间 :")]),e._v(" "),a("span",[e._v(e._s(e._f("dateFormat")(Date.now())))])]),e._v(" "),a("div",{staticClass:"left",staticStyle:{"margin-left":"20px"}},[e._m(1),e._v(" "),a("el-select",{staticStyle:{"margin-left":"-20px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.typeVal,callback:function(t){e.typeVal=t},expression:"typeVal"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("li",[e._m(2),e._v(" "),a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":e.errors.has("videoUrl")},attrs:{placeholder:"请输入映射地址",width:"100%",id:"address",name:"videoUrl"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),e._v(" "),a("p",{staticClass:"hint"},[e._v(" "+e._s(e.errors.first("videoUrl"))+" ")])],1),e._v(" "),a("li",[e._m(3),e._v(" "),a("div",{staticClass:"editor"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.videoContent,expression:"videoContent"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":e.errors.has("vidContent")},attrs:{type:"hidden",name:"vidContent"},domProps:{value:e.videoContent},on:{input:function(t){t.target.composing||(e.videoContent=t.target.value)}}}),e._v(" "),a("UE",{ref:"ue",attrs:{config:e.config,defaultMsg:e.defaultMsg},on:{onready:e.insertContent}})],1),e._v(" "),a("p",{staticClass:"hint"},[e._v(" "+e._s(e.errors.first("vidContent"))+" ")])]),e._v(" "),a("li",{staticClass:"submit"},[a("button",{on:{click:e.save}},[e._v("保 存")]),e._v(" "),a("button",{on:{click:e.goBack}},[e._v("取 消")])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"title"}},[t("i",{staticClass:"iconfont icon-xinghao"}),this._v("视频名称 :")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"label",attrs:{for:"author"}},[this._v("分"),t("span",{staticStyle:{display:"inline-block",width:"28px"}}),this._v("类 :")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"address"}},[t("i",{staticClass:"iconfont icon-xinghao"}),this._v("映射地址 :")])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"content"}},[t("i",{staticClass:"iconfont icon-xinghao"}),this._v("视频描述 :")])}]};var d=a("C7Lr")(s,l,!1,function(e){a("fjIz")},"data-v-96724128",null);t.default=d.exports},fjIz:function(e,t){}});
//# sourceMappingURL=19.70649fa8f95c97b046f3.js.map