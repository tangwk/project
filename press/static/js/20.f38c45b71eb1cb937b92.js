webpackJsonp([20],{HADO:function(e,t){},o0gK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Osha"),o=a("/p82"),s={name:"Video",data:function(){return{videoName:"",videoData:[],deleteType:"",multipleSelection:[],currentPage:1,total:null,alertClosed:!1,options:[]}},watch:{videoName:function(e){""===e&&this.search()}},methods:{searchData:function(){this.videoData=[],this.currentPage=1,this.search()},search:function(){var e=this;this.videoData=[],o.a.getVideoList({type:"1",id:"",partyschoolId:"",videoName:this.videoName,videoContent:"",startDate:"",endDate:"",pageNum:this.currentPage,pageSize:10}).then(function(t){var a=t.result;if(200===t.code){a.forEach(function(t){t.videoName=t.videoName,t.videoTime=e.formatDate(t.uploadDate),e.options.forEach(function(e){e.value==t.videoType&&(t.videoType=e.label)}),t.status=t.status,t.reportID=t.id,"1"===t.status&&(t.status="已审批"),"2"===t.status&&(t.status="待审批"),"3"===t.status&&(t.status="未通过")}),e.videoData=a;for(var i=0;i<e.videoData.length;i++)9==i?e.videoData[i].num=e.currentPage+"0":1==e.currentPage?e.videoData[i].num=e.currentPage+i+"":e.videoData[i].num=e.currentPage-1+""+(i+1)}else 900===t.code&&(e.currentPage>1?(e.currentPage=e.currentPage-1,e.search()):e.videoData=[]);t.number&&(e.total=t.number)})},getTypeList:function(){var e=this;o.a.typeList({codeName:"",codeType:"videoType",id:"",code:""}).then(function(t){var a=t.result;e.options=[],a&&(a.forEach(function(e){e.label=e.codeName,e.value=e.code}),e.options=a)})},handleSelectionChange:function(e){this.multipleSelection=e},deleteAll:function(){var e=this,t=[];this.multipleSelection.map(function(e){var a={};a.id=e.id,a.status=e.status,t.push(a)}),o.a.deleteVideo({data:t}).then(function(t){200===t.code&&(e.alertClosed=!e.alertClosed,e.$message({message:"删除成功！",type:"success"}),e.search())})},deleteSingle:function(){var e=this;o.a.deleteVideo({data:[{id:this.currentDelId,status:this.status}]}).then(function(t){200===t.code&&(e.alertClosed=!e.alertClosed,e.$message({message:"删除成功！",type:"success"}),e.search())})},checkDel:function(){this.alertClosed=!this.alertClosed,this.deleteType="deleteAll"},handleDel:function(e,t){this.currentDelId=t.reportID,this.status=t.status,this.alertClosed=!this.alertClosed,this.deleteType="deleteSingle"},sureDel:function(){"deleteAll"===this.$refs.deleteRef.getAttribute("data-type")?this.deleteAll():this.deleteSingle()},close:function(){this.alertClosed=!this.alertClosed},upload:function(){this.$router.push("uploadVideo")},handleLook:function(e,t){this.$router.push({name:"VideoLook",query:{reportID:t.reportID,currentPage:this.currentPage}})},handleModify:function(e,t){this.$router.push({name:"VideoModify",query:{reportID:t.reportID,currentPage:this.currentPage}})},handleCurrentChange:function(e){this.currentPage=e,this.search()},formatDate:function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var o=t.getDate();return a+"-"+i+"-"+(o=o<10?"0"+o:o)+" "}},created:function(){this.$route.query.currentPage&&(this.currentPage=Number(this.$route.query.currentPage)),this.getTypeList(),this.search()},components:{commonBread:i.a}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"boxBor"},[a("div",{staticClass:"crumbs"},[a("common-bread")],1),e._v(" "),a("div",{staticClass:"user"},[a("p",{staticClass:"titleBar"},[e._v("\n      视频管理\n    ")]),e._v(" "),a("div",{staticClass:"userListBor"},[a("div",{staticClass:"userList clear"},[a("div",{staticClass:"actBtn left"},[a("button",{staticClass:"newAdd",on:{click:e.upload}},[e._v("上传视频")])]),e._v(" "),a("ul",{staticClass:"fillIn right"},[a("li",[e._m(0),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.videoName,expression:"videoName"}],attrs:{type:"text",size:"small",name:"keyword",placeholder:"按视频名称搜索"},domProps:{value:e.videoName},on:{input:function(t){t.target.composing||(e.videoName=t.target.value)}}})]),e._v(" "),a("li",[a("button",{on:{click:e.searchData}},[e._v("搜 索")])])])]),e._v(" "),a("el-table",{ref:"singleTable",attrs:{data:e.videoData,"highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{property:"num",label:"序号","show-overflow-tooltip":"",width:"80px",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"videoName",label:"视频名称","show-overflow-tooltip":"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"videoType",label:"分类","show-overflow-tooltip":"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"videoTime",label:"上传时间","show-overflow-tooltip":"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"status",label:"状态","show-overflow-tooltip":"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"iconfont icon-yanjing-copy",attrs:{title:"查看"},on:{click:function(a){e.handleLook(t.$index,t.row)}}}),e._v(" "),a("i",{staticClass:"iconfont icon-web-icon-",attrs:{title:"修改"},on:{click:function(a){e.handleModify(t.$index,t.row)}}}),e._v(" "),a("i",{staticClass:"iconfont icon-shanchu-copy",attrs:{title:"删除"},on:{click:function(a){e.handleDel(t.$index,t.row)}}})]}}])})],1),e._v(" "),e.total>1?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1):e._e()],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.alertClosed,expression:"alertClosed"}],staticClass:"dataDel"},[a("div",{staticClass:"sureDel"},[a("div",{staticClass:"titleDel"},[a("p",[e._v("确认删除")]),e._v(" "),a("i",{staticClass:"iconfont icon-guanbi",on:{click:e.close}})]),e._v(" "),a("h3",[e._v("是否确认删除?")]),e._v(" "),a("p",[a("button",{ref:"deleteRef",attrs:{"data-type":e.deleteType},on:{click:e.sureDel}},[e._v("确定")]),e._v(" "),a("button",{on:{click:e.close}},[e._v("取消")])])]),e._v(" "),a("div",{staticClass:"opacityDel"})])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"keyword"}},[t("span",{staticStyle:{display:"inline-block",width:"0.2rem"}}),this._v("关\n              "),t("span",{staticStyle:{display:"inline-block",width:"0.26rem"}}),this._v("键\n              "),t("span",{staticStyle:{display:"inline-block",width:"0.26rem"}}),this._v("字 :\n              "),t("span",{staticStyle:{display:"inline-block",width:"0.18rem"}})])}]};var l=a("C7Lr")(s,n,!1,function(e){a("HADO")},"data-v-77a61b4e",null);t.default=l.exports}});
//# sourceMappingURL=20.f38c45b71eb1cb937b92.js.map