{"version":3,"sources":["webpack:///./src/API/wechat.js","webpack:///src/pages/vipcn/weMenu.vue","webpack:///./src/pages/vipcn/weMenu.vue?beab","webpack:///./src/pages/vipcn/weMenu.vue"],"names":["__WEBPACK_IMPORTED_MODULE_0__request__","__webpack_require__","API","getWeChatList","arg","request","url","method","data","deleteMenu","addMenu","info","getMenuList","getParentMenu","getMenuUrl","saveNewMenu","pushMenu","resetMenu","deleteMenuData","weMenu","name","form","menuParent","menuName","menuUrl","flag","menuData","parentOptions","options","methods","search","_this","this","wechat","partyschoolId","reportID","then","res","_data","result","code","forEach","item","firstMenu","parentName","children","oneMenu","twoMenu","threeMenu","fourMenu","fiveMenu","save","_this2","$validator","validateAll","parentId","menuType","urlId","$message","message","type","reset","onSubmit","_this3","length","_this4","_this5","label","value","id","_this6","objectSpanMethod","_ref","row","column","rowIndex","columnIndex","rowspan","colspan","goBack","$router","push","$route","query","currentPage","created","components","commonBread","bread","vipcn_weMenu","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_m","ref","attrs","model","label-width","prop","clearable","placeholder","callback","$$v","$set","expression","_l","key","directives","rawName","class","input","is-danger","errors","has","_s","first","filterable","_e","on","click","$event","staticStyle","margin-left","width","align","show-overflow-tooltip","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.dc9f24359450bcdae70a.js","sourcesContent":["import request from './request'\r\n\r\n/**\r\n * [getWeChatList 查询公众号列表信息]\r\n **/\r\nexport function getWeChatList(arg) {\r\n  return request({\r\n    url: `/findWechatAccount`,\r\n    method: 'post',\r\n    data: arg,\r\n    // withCredentials: true\r\n  })\r\n}\r\n\r\n/**\r\n * [deleteMenu 删除菜单]\r\n **/\r\nexport function deleteMenu(arg) {\r\n  return request({\r\n    url: `/deleteMenu`,\r\n    method: 'post',\r\n    data: arg,\r\n    // withCredentials: true\r\n  })\r\n}\r\n\r\n/**\r\n * [addMenu 添加菜单]\r\n **/\r\nexport function addMenu(info) {\r\n  return request({\r\n    url: `/saveMenu`,\r\n    method: 'post',\r\n    data: info,\r\n    // withCredentials: true\r\n  })\r\n}\r\n\r\n/**\r\n * [getMenuList 获取菜单List]\r\n **/\r\nexport function getMenuList(info) {\r\n  return request({\r\n    url: `/findWechatMenuByPartyschoolId`,\r\n    method: 'post',\r\n    data: info,\r\n    // withCredentials: true\r\n  })\r\n}\r\n\r\n/**\r\n * [getParentMenu 获取父级菜单options]\r\n **/\r\nexport function getParentMenu(info) {\r\n  return request({\r\n    url: `/findParentMenu`,\r\n    method: 'post',\r\n    data: info,\r\n    // withCredentials: true\r\n  })\r\n}\r\n\r\n/**\r\n * [getMenuUrl 获取菜单Url options]\r\n **/\r\nexport function getMenuUrl(info) {\r\n  return request({\r\n    url: `/findWechatMenuUrl`,\r\n    method: 'post',\r\n    data: info,\r\n    // withCredentials: true\r\n  })\r\n}\r\n\r\n/**\r\n * [saveNewMenu 保存当前添加的菜单]\r\n **/\r\nexport function saveNewMenu(info) {\r\n  return request({\r\n    url: `/saveWechatMenu`,\r\n    method: 'post',\r\n    data: info,\r\n    // withCredentials: true\r\n  })\r\n}\r\n\r\n/**\r\n * [pushMenu 发布菜单]\r\n **/\r\nexport function pushMenu(info) {\r\n  return request({\r\n    url: `/pushMenu`,\r\n    method: 'post',\r\n    data: info,\r\n    // withCredentials: true\r\n  })\r\n}\r\n\r\n/**\r\n * [resetMenu 重置(删除)公众号的菜单]\r\n **/\r\nexport function resetMenu(info) {\r\n  return request({\r\n    url: `/deleteMenu`,\r\n    method: 'post',\r\n    data: info,\r\n    // withCredentials: true\r\n  })\r\n}\r\n\r\n/**\r\n * [deleteMenuData 删除库里面的数据]\r\n **/\r\nexport function deleteMenuData(info) {\r\n  return request({\r\n    url: `/deleteWechatMenu`,\r\n    method: 'post',\r\n    data: info,\r\n    // withCredentials: true\r\n  })\r\n}\r\n\r\n\r\n\r\nconst API = {\r\n  getWeChatList,\r\n  deleteMenu,\r\n  addMenu,\r\n  getMenuList,\r\n  getParentMenu,\r\n  getMenuUrl,\r\n  saveNewMenu,\r\n  pushMenu,\r\n  resetMenu,\r\n  deleteMenuData\r\n}\r\nexport default API\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/API/wechat.js","<template>\n  <div class=\"weBor\">\n    <div class=\"crumbs\">\n      <common-bread></common-bread>\n    </div>\n    <div class=\"user\">\n      <p class=\"titleBar\">\n        自定义菜单\n      </p>\n      <div class=\"menuBor\">\n        <ol class=\"warning\">\n          <li>1. 使用本模块生产微信端，必须在微信公众平台申请自定义菜单使用的AppId和AppSecret，即在党校平台中获得授权。</li>\n          <li>2. 微信端最多创建3个一级菜单，每个一级菜单下最多可以创建5个二级菜单，菜单最多支持两层。（多出部分会生成前3个一级菜单）</li>\n          <li>3. 主菜单最多4个汉字，子菜单最多7个汉字，多出来的部分将会以“...”代替。</li>\n          <li>4. 同步自定义菜单后，由于微信客户端缓存，最长需24小时微信客户端才会展现，建议尝试取消关注公众账号后再次关注，则可看到效果。</li>\n          <li>5. 已通过党校平台绑定相应微信公众号，如果您绑定的是订阅号，自定义菜单不可用。</li>\n          <li>6. 添加自定义菜单的二级菜单时一定要选择父级菜单选项，直接添加默认为一级菜单。</li>\n        </ol>\n        <div class=\"newsBor\">\n          <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n            <el-form-item label=\"父级菜单 :\" prop=\"menuParent\">\n              <el-select v-model=\"form.menuParent\" clearable placeholder=\"请选择\">\n                <el-option v-for=\"item in parentOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n                </el-option>\n              </el-select>\n              <span class=\"hint\">二级菜单必须要选择父菜单</span>\n            </el-form-item>\n            <el-form-item label=\"菜单名称 :\" v-if=\"!form.menuParent\" prop=\"menuName\">\n              <el-input v-model=\"form.menuName\" name=\"menuNameA\" v-validate=\"'required|menuName'\" :class=\" {'input':true, 'is-danger': errors.has('menuNameA')} \"></el-input>\n              <span class=\"hint\">一级菜单最多4个汉字</span>\n              <p class=\"hints\"> {{ errors.first('menuNameA') }} </p>\n            </el-form-item>\n            <el-form-item label=\"菜单名称 :\" v-else prop=\"menuName\">\n              <el-input v-model=\"form.menuName\" name=\"menuNameA\" v-validate=\"'required|menuName2'\" :class=\" {'input':true, 'is-danger': errors.has('menuNameA')} \"></el-input>\n              <span class=\"hint\">二级菜单最多7个汉字</span>\n              <p class=\"hints\"> {{ errors.first('menuNameA') }} </p>\n            </el-form-item>\n            <!-- <el-form-item label=\"菜单类型 :\" prop=\"menuType\">\n                        <el-select v-model=\"form.menuType\" placeholder=\"关键词回复菜单\" name=\"menuTypeA\" v-validate=\"'required'\" :class=\" {'input':true, 'is-danger': errors.has('menuTypeA')} \">\n                          <el-option label=\"发送消息\" value=\"1\"></el-option>\n                          <el-option label=\"跳转网页\" value=\"2\"></el-option>\n                          <el-option label=\"跳转小程序\" value=\"3\"></el-option>\n                        </el-select>\n                        <p class=\"hints\"> {{ errors.first('menuTypeA') }} </p>\n                      </el-form-item> -->\n            <el-form-item label=\"菜单功能 :\" prop=\"menuUrl\" v-if=\"this.form.menuParent\">\n              <el-select v-model=\"form.menuUrl\" clearable filterable placeholder=\"请选择\" name=\"menuUrlA\" v-validate=\"'required'\" :class=\" {'input':true, 'is-danger': errors.has('menuUrlA')} \">\n                <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n                </el-option>\n              </el-select>\n              <p class=\"hints\"> {{ errors.first('menuUrlA') }} </p>\n            </el-form-item>\n            <el-form-item class=\"save\">\n              <el-button type=\"primary\" @click=\"save('form')\">保 存</el-button>\n              <el-button style=\"margin-left: 60px;\" @click=\"goBack\">返 回</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n        <div class=\"menuTable\">\n          <el-table :data=\"menuData\" style=\"width: 100%\">\n            <el-table-column type=\"index\" align=\"center\" width=\"50\">\n            </el-table-column>\n            <el-table-column prop=\"firstMenu\" label=\"一级菜单\" show-overflow-tooltip align=\"center\" width=\"120\">\n            </el-table-column>\n            <el-table-column label=\"二级菜单\" align=\"center\">\n              <el-table-column prop=\"oneMenu\" label=\"一\" show-overflow-tooltip align=\"center\" width=\"120\">\n              </el-table-column>\n              <el-table-column prop=\"twoMenu\" label=\"二\" show-overflow-tooltip align=\"center\" width=\"120\">\n              </el-table-column>\n              <el-table-column prop=\"threeMenu\" label=\"三\" show-overflow-tooltip align=\"center\" width=\"120\">\n              </el-table-column>\n              <el-table-column prop=\"fourMenu\" label=\"四\" show-overflow-tooltip align=\"center\" width=\"120\">\n              </el-table-column>\n              <el-table-column prop=\"fiveMenu\" label=\"五\" show-overflow-tooltip align=\"center\" width=\"120\">\n              </el-table-column>\n            </el-table-column>\n          </el-table>\n        </div>\n        <div class=\"release\">\n          <el-button type=\"primary\" @click=\"onSubmit\">发布自定义菜单</el-button>\n          <el-button type=\"primary\" @click=\"reset\">重置自定义菜单</el-button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport commonBread from \"../../components/bread\";\nimport API from \"../../API/wechat.js\";\nexport default {\n  name: \"WeMenu\",\n  data() {\n    return {\n      form: {\n        menuParent: \"\",\n        menuName: \"\",\n        // menuType: \"\",\n        menuUrl: \"\"\n      },\n      flag: false,\n      menuData: [\n        // {\n        //   firstMenu: \"历史文章\",\n        //   firstVal: {\n        //     oneMenu: \"吃\",\n        //     twoMenu: \"喝\",\n        //     threeMenu: \"玩\",\n        //     fourMenu: \"乐\",\n        //     fiveMenu: \"游\"\n        //   }\n        // },\n      ],\n      parentOptions: [\n        // {\n        //   label: \"一\",\n        //   value: \"1\"\n        // }\n      ],\n      options: []\n    };\n  },\n  methods: {\n    search() {\n      this.menuData = [];\n      API.getMenuList({\n        partyschoolId: this.reportID\n      }).then(res => {\n        // console.log(res)\n        var _data = res.result;\n        if (res.code !== 900) {\n          _data.forEach(item => {\n            item.firstMenu = item.parentName;\n            if (item.children[0]) {\n              item.oneMenu = item.children[0].menuName;\n            } else {\n              item.oneMenu = \"\";\n            }\n            if (item.children[1]) {\n              item.twoMenu = item.children[1].menuName;\n            } else {\n              item.twoMenu = \"\";\n            }\n            if (item.children[2]) {\n              item.threeMenu = item.children[2].menuName;\n            } else {\n              item.threeMenu = \"\";\n            }\n            if (item.children[3]) {\n              item.fourMenu = item.children[3].menuName;\n            } else {\n              item.fourMenu = \"\";\n            }\n            if (item.children[4]) {\n              item.fiveMenu = item.children[4].menuName;\n            } else {\n              item.fiveMenu = \"\";\n            }\n          });\n          this.menuData = _data;\n        }\n      });\n    },\n    save(form) {\n      // console.log(this.$refs.form)\n      this.$validator.validateAll().then(res => {\n        if (res) {\n          API.saveNewMenu({\n            partyschoolId: this.reportID,\n            parentId: this.form.menuParent,\n            // menuType: this.form.menuType,\n            menuType: \"2\",\n            menuName: this.form.menuName,\n            urlId: this.form.menuUrl\n          }).then(res => {\n            this.$message({\n              message: \"保存成功！\",\n              type: \"success\"\n            });\n            // 清空表单数据并重置为初始值并移除校验结果\n            this.form.menuParent = \"\";\n            // this.form.menuType = \"\"\n            this.form.menuName = \"\";\n            this.form.menuUrl = \"\";\n            this.$validator.reset();\n            this.getParentMenu();\n            this.search();\n          });\n        }\n      });\n    },\n    onSubmit() {\n      this.flag = false;\n      this.menuData.forEach(item => {\n\n        if (item.children.length <= 0) {\n          this.$message({\n            message: \"请选择二级菜单\",\n            type: \"warning\"\n          });\n          this.flag = true;\n        }\n      });\n      if (this.flag) return;\n      // this.menuData.forEach(item => {\n      //   console.log()\n      //   if (item.children.length) {\n      API.pushMenu({\n        partyschoolId: this.reportID\n      }).then(res => {\n        if (res.code === 200) {\n          this.$message({\n            message: \"发布成功\",\n            type: \"success\"\n          });\n        }\n      });\n      // } else {\n      //   this.$message({\n      //     message: \"请选择二级菜单\",\n      //     type: \"warning\"\n      //   });\n      // }\n      // })\n    },\n    reset() {\n      API.resetMenu({\n        partyschoolId: this.reportID\n      }).then(res => {\n        if (res.code === 200) {\n          this.$message({\n            message: \"重置成功！\",\n            type: \"success\"\n          });\n          this.search();\n          this.getParentMenu();\n      \n        }\n      });\n    },\n    getParentMenu() {\n      API.getParentMenu({\n        partyschoolId: this.reportID\n      }).then(res => {\n        var _data = res.result;\n        this.parentOptions = [];\n        if (_data) {\n          _data.forEach(item => {\n            item.label = item.menuName;\n            item.value = item.id;\n          });\n          this.parentOptions = _data;\n        }\n      });\n    },\n    getMenuUrl() {\n      API.getMenuUrl({\n        type: \"5\",\n        partyschoolId: this.partyschoolId\n      }).then(res => {\n        var _data = res.result;\n        this.options = [];\n        if (_data) {\n          _data.forEach(item => {\n            item.label = item.name;\n            item.value = item.id;\n          });\n          this.options = _data;\n        }\n      });\n    },\n    objectSpanMethod({ row, column, rowIndex, columnIndex }) {\n      // 表格合并计算\n      if (columnIndex === 0) {\n        if (rowIndex % 5 === 0) {\n          return {\n            rowspan: 5,\n            colspan: 1\n          };\n        } else {\n          return {\n            rowspan: 0,\n            colspan: 0\n          };\n        }\n      }\n    },\n    goBack() {\n      // this.$router.go(-1);\n      this.$router.push(\n        \"/layOut/wechat?currentPage=\" + this.$route.query.currentPage\n      );\n    }\n  },\n  created() {\n    this.reportID = this.$route.query.reportID;\n    this.partyschoolId = this.$route.query.partyschoolId;\n    this.search();\n    this.getParentMenu();\n    this.getMenuUrl();\n  },\n  components: {\n    commonBread\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import \"../../style/mix\";\n@import \"../../style/magTable\";\n.menuBor {\n  .warning {\n    margin: 20px;\n    background-color: #fcf8e4;\n    li {\n      color: #bd7b61;\n      padding: 0 15px;\n      height: 24px;\n      line-height: 24px;\n    }\n  }\n  .newsBor {\n    width: 550px;\n    margin-left: calc(50% - 275px);\n    padding: 0 20px;\n    .hint {\n      color: @dc;\n      padding-left: 5px;\n    }\n    .save {\n      text-align: center;\n    }\n  }\n  .menuTable {\n    .wh(100%, 203px);\n    padding: 0 50px;\n    box-sizing: border-box;\n    margin-bottom: 30px;\n  }\n  .release {\n    .wh(100%, 32px);\n    text-align: center;\n    margin-bottom: 30px;\n    .el-button {\n      &:last-child {\n        margin-left: 60px;\n      }\n    }\n  }\n  .el-form-item {\n    height: 40px;\n  }\n  .hints {\n    font-size: 12px;\n    line-height: 18px;\n    color: #ff0000;\n    margin-top: -5px;\n  }\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/vipcn/weMenu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weBor\"},[_c('div',{staticClass:\"crumbs\"},[_c('common-bread')],1),_vm._v(\" \"),_c('div',{staticClass:\"user\"},[_c('p',{staticClass:\"titleBar\"},[_vm._v(\"\\n      自定义菜单\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"menuBor\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"newsBor\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"父级菜单 :\",\"prop\":\"menuParent\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.form.menuParent),callback:function ($$v) {_vm.$set(_vm.form, \"menuParent\", $$v)},expression:\"form.menuParent\"}},_vm._l((_vm.parentOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})})),_vm._v(\" \"),_c('span',{staticClass:\"hint\"},[_vm._v(\"二级菜单必须要选择父菜单\")])],1),_vm._v(\" \"),(!_vm.form.menuParent)?_c('el-form-item',{attrs:{\"label\":\"菜单名称 :\",\"prop\":\"menuName\"}},[_c('el-input',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required|menuName'),expression:\"'required|menuName'\"}],class:{'input':true, 'is-danger': _vm.errors.has('menuNameA')},attrs:{\"name\":\"menuNameA\"},model:{value:(_vm.form.menuName),callback:function ($$v) {_vm.$set(_vm.form, \"menuName\", $$v)},expression:\"form.menuName\"}}),_vm._v(\" \"),_c('span',{staticClass:\"hint\"},[_vm._v(\"一级菜单最多4个汉字\")]),_vm._v(\" \"),_c('p',{staticClass:\"hints\"},[_vm._v(\" \"+_vm._s(_vm.errors.first('menuNameA'))+\" \")])],1):_c('el-form-item',{attrs:{\"label\":\"菜单名称 :\",\"prop\":\"menuName\"}},[_c('el-input',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required|menuName2'),expression:\"'required|menuName2'\"}],class:{'input':true, 'is-danger': _vm.errors.has('menuNameA')},attrs:{\"name\":\"menuNameA\"},model:{value:(_vm.form.menuName),callback:function ($$v) {_vm.$set(_vm.form, \"menuName\", $$v)},expression:\"form.menuName\"}}),_vm._v(\" \"),_c('span',{staticClass:\"hint\"},[_vm._v(\"二级菜单最多7个汉字\")]),_vm._v(\" \"),_c('p',{staticClass:\"hints\"},[_vm._v(\" \"+_vm._s(_vm.errors.first('menuNameA'))+\" \")])],1),_vm._v(\" \"),(this.form.menuParent)?_c('el-form-item',{attrs:{\"label\":\"菜单功能 :\",\"prop\":\"menuUrl\"}},[_c('el-select',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],class:{'input':true, 'is-danger': _vm.errors.has('menuUrlA')},attrs:{\"clearable\":\"\",\"filterable\":\"\",\"placeholder\":\"请选择\",\"name\":\"menuUrlA\"},model:{value:(_vm.form.menuUrl),callback:function ($$v) {_vm.$set(_vm.form, \"menuUrl\", $$v)},expression:\"form.menuUrl\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})})),_vm._v(\" \"),_c('p',{staticClass:\"hints\"},[_vm._v(\" \"+_vm._s(_vm.errors.first('menuUrlA'))+\" \")])],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{staticClass:\"save\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.save('form')}}},[_vm._v(\"保 存\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"60px\"},on:{\"click\":_vm.goBack}},[_vm._v(\"返 回\")])],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"menuTable\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.menuData}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"align\":\"center\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"firstMenu\",\"label\":\"一级菜单\",\"show-overflow-tooltip\":\"\",\"align\":\"center\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"二级菜单\",\"align\":\"center\"}},[_c('el-table-column',{attrs:{\"prop\":\"oneMenu\",\"label\":\"一\",\"show-overflow-tooltip\":\"\",\"align\":\"center\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"twoMenu\",\"label\":\"二\",\"show-overflow-tooltip\":\"\",\"align\":\"center\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"threeMenu\",\"label\":\"三\",\"show-overflow-tooltip\":\"\",\"align\":\"center\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"fourMenu\",\"label\":\"四\",\"show-overflow-tooltip\":\"\",\"align\":\"center\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"fiveMenu\",\"label\":\"五\",\"show-overflow-tooltip\":\"\",\"align\":\"center\",\"width\":\"120\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"release\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"发布自定义菜单\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置自定义菜单\")])],1)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ol',{staticClass:\"warning\"},[_c('li',[_vm._v(\"1. 使用本模块生产微信端，必须在微信公众平台申请自定义菜单使用的AppId和AppSecret，即在党校平台中获得授权。\")]),_vm._v(\" \"),_c('li',[_vm._v(\"2. 微信端最多创建3个一级菜单，每个一级菜单下最多可以创建5个二级菜单，菜单最多支持两层。（多出部分会生成前3个一级菜单）\")]),_vm._v(\" \"),_c('li',[_vm._v(\"3. 主菜单最多4个汉字，子菜单最多7个汉字，多出来的部分将会以“...”代替。\")]),_vm._v(\" \"),_c('li',[_vm._v(\"4. 同步自定义菜单后，由于微信客户端缓存，最长需24小时微信客户端才会展现，建议尝试取消关注公众账号后再次关注，则可看到效果。\")]),_vm._v(\" \"),_c('li',[_vm._v(\"5. 已通过党校平台绑定相应微信公众号，如果您绑定的是订阅号，自定义菜单不可用。\")]),_vm._v(\" \"),_c('li',[_vm._v(\"6. 添加自定义菜单的二级菜单时一定要选择父级菜单选项，直接添加默认为一级菜单。\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-6dd2dd08\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/vipcn/weMenu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6dd2dd08\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./weMenu.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./weMenu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./weMenu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6dd2dd08\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./weMenu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6dd2dd08\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/vipcn/weMenu.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}