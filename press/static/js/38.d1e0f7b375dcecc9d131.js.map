{"version":3,"sources":["webpack:///src/pages/party/power.vue","webpack:///./src/pages/party/power.vue?3f82","webpack:///./src/pages/party/power.vue"],"names":["power","name","data","filters","column","create_start_date","create_end_date","rollArr1","rollArr2","rollArr","mark1","mark2","mark","startDate","id","endDate","gongNeng","content","multipleSelection","data2","data3","flag","pickerBeginDateBefore","disabledDate","time","getTime","Date","now","pickerBeginDateAfter","funcList","filterText","libaryData1","libaryData2","libaryData3","defaultProps","label","children","isLeaf","resolve","watch","val","this","$refs","tree","filter","methods","monitorActivate","i","chars","split","uuid","Math","random","length","uId","join","_BFD","UserAction","uid","partyschool_name","$route","query","partyschoolName","start_date","end_date","demo","reportID","search1","_this","PartyUser","partyschoolId","type","resourcesType","sourceType","then","res","code","result","arr","forEach","item","items","push","authorizationId","concat","getData","_this2","handleSelectionChange","val1","_this3","halfCheckedKeys","obj","checkedNodes","handleCheck","arr1","arr2","_this4","search","_this5","powerSubmit","_this6","$router","$message","message","goBack","go","filterNode","value","indexOf","resetChecked","trees","setCheckedKeys","resetCheckedAll","_this7","components","commonBread","created","party_power","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","staticStyle","color","attrs","label-width","display","value-format","size","picker-options","format","on","change","$event","model","callback","$$v","$set","expression","_m","round","click","show-checkbox","node-key","default-checked-keys","props","check","placeholder","filter-node-method","staticRenderFns","width","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/38.d1e0f7b375dcecc9d131.js","sourcesContent":["<template>\n  <div class=\"powerBor\">\n    <div class=\"crumbs\">\n      <common-bread></common-bread>\n    </div>\n    <div class=\"user\">\n      <p class=\"titleBar\">\n        党校授权\n      </p>\n      <div class=\"during\">\n        <!-- 时间选择开始 -->\n        <el-form ref=\"form\" label-width=\"80px\" style=\"color:#999999;\">\n          <el-form-item label=\"授权期限 : \" style=\"display:inline-block;color:#999999;\">\n            <el-date-picker value-format=\" yyyy-MM-dd\" id=\"date1\" v-model=\"filters.column.create_start_date\" @change=\"filters.column.create_start_date=$event\" type=\"date\" size=\"small\" :picker-options=\"pickerBeginDateBefore\" format=\"yyyy-MM-dd\">\n            </el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"至\" label-width=\"25px\" style=\"display:inline-block;color:#999999;\">\n            <el-date-picker value-format=\" yyyy-MM-dd\" id=\"date2\" v-model=\"filters.column.create_end_date\" @change=\"filters.column.create_end_date=$event\" type=\"date\" size=\"small\" format=\"yyyy-MM-dd\" :picker-options=\"pickerBeginDateAfter\">\n            </el-date-picker>\n          </el-form-item>\n        </el-form>\n        <!-- 时间选择结 -->\n      </div>\n      <!-- 功能页面 -->\n      <div class=\"function\">\n        <h3>功<span style=\"display: inline-block;width: 30px;\"></span>能 :</h3>\n        <div class=\"anNiu\">\n          <el-button round type=\"primary\" @click=\"resetCheckedAll\" id=\"quanxuan\">全选</el-button>\n          <el-button round @click=\"resetChecked\" id=\"quanxuan\">清空</el-button>\n        </div>\n        <div id=\"tree\">\n          <el-tree ref=\"trees\" :data=\"data2\" show-checkbox node-key=\"id\" :default-checked-keys=\"gongNeng\" :props=\"defaultProps\" @check=\"handleSelectionChange\">\n          </el-tree>\n        </div>\n      </div>\n      <!-- 功能页面结束 -->\n      <!-- 内容资源开始 -->\n      <div class=\"content\">\n        <h3>内容资源 :</h3>\n        <div class=\"treeBor\">\n          <el-input placeholder=\"输入关键字进行过滤\" v-model=\"filterText\">\n          </el-input>\n          <el-tree :data=\"data3\" show-checkbox node-key=\"id\" :default-checked-keys=\"content\" :props=\"defaultProps\" @check=\"handleCheck\" ref=\"tree\" :filter-node-method=\"filterNode\">\n          </el-tree>\n        </div>\n      </div>\n      <!-- 内容资源结束 -->\n      <div class=\"submit\">\n        <button @click=\"powerSubmit\">授 权</button>\n        <button @click=\"goBack\">取 消</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import * as API from \"@/API/PartyUser.js\";\n  import commonBread from \"../../components/bread\";\n  export default {\n    name: \"Power\",\n    data() {\n      return {\n        filters: {\n          // 日期选择\n          column: {\n            create_start_date: \"\", // new Date()\n            create_end_date: \"\" // new Date()\n          }\n        },\n        rollArr1: [], //功能\n        rollArr2: [], //内容资源\n        rollArr: [], //发送请求要传的数据\n        mark1: [], //功能的mark\n        mark2: [], //内容资源的mark\n        mark: [], //总的\n        startDate: \"\",\n        id: \"\",\n        endDate: \"\",\n        gongNeng: [],\n        content: [],\n        multipleSelection: [],\n        data2: [],\n        data3: [],\n        flag: true,\n        pickerBeginDateBefore: {\n          // 设定开始日期区间\n          disabledDate: time => {\n            return time.getTime() < Date.now() - 86400000;\n          }\n        },\n        pickerBeginDateAfter: {\n          // 设定结束日期区间\n          disabledDate: time => {\n            return time.getTime() < Date.now() - 86400000;\n          }\n        },\n        funcList: [],\n        filterText: \"\",\n        libaryData1: [],\n        libaryData2: [],\n        libaryData3: [],\n        defaultProps: {\n          label: \"label\",\n          children: \"children\",\n          isLeaf: \"leaf\"\n        },\n        resolve: null\n      };\n    },\n    watch: {\n      // 过滤方法\n      filterText(val) {\n        this.$refs.tree.filter(val);\n      }\n    },\n    methods: {\n      //党校接入事件埋点代码\n      monitorActivate() {\n        //获取唯一标识uId\n        var chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\".split(\n          \"\"\n        );\n        var uuid = [],\n          i;\n        for (i = 0; i < 8; i++)\n          uuid[i] = chars[0 | (Math.random() * chars.length)];\n        var uId = uuid.join(\"\");\n        _BFD.UserAction(\"add_partySchool\", {\n          uid: uId,\n          partyschool_name:this.$route.query.partyschoolName,\n          start_date:this.filters.column.create_start_date,\n          end_date:this.filters.column.create_end_date\n        });\n      },\n      //获取传过来的id\n      demo() {\n        this.id = this.$route.query.reportID;\n      },\n      //内容权限查看\n      search1() {\n        API.Jurisdiction({\n          partyschoolId: this.id,\n          type: \"2\",\n          resourcesType: \"2\",\n          sourceType: \"1\"\n        }).then(res => {\n          if (res.code === 200) {\n            this.data3 = res.result;\n            //查看内容里授权的内容，mark标识符，并取出来\n            //查看二级菜单里的mark值，并去除id\n            var arr = [];\n            this.rollArr2 = [];\n            this.data3.forEach(item => {      \n              if (item.children.length) {\n                item.children.forEach(items => {\n                  if (items.mark) {\n                    arr.push(items.id);\n                    this.rollArr2.push({\n                      authorizationId: items.id,\n                      type: \"2\"\n                    });\n                    this.rollArr = this.rollArr1.concat(this.rollArr2);\n                  }\n                });\n              }\n            });\n          }\n          this.content = arr;\n        });\n      },\n      getData() {\n        var vm = this;\n        API.Jurisdiction({\n          partyschoolId: this.id,\n          type: \"2\",\n          resourcesType: \"2\",\n          sourceType: \"1\"\n        }).then(res => {\n          //获取出版全部的内容资源\n          this.data3 = res.result;\n        });\n      },\n      // 功能复选框,数据改变时获取实时的数据\n      handleSelectionChange(val, val1) {\n        this.rollArr1 = [];\n        if (val1.halfCheckedKeys.length) {\n          val1.halfCheckedKeys.forEach(item => {\n            var obj = {};\n            obj.authorizationId = item;\n            obj.type = 1;\n            this.rollArr1.push(obj);\n          });\n        }\n        var _node = val1.checkedNodes; //当前选中状态的全部节点halfCheckedKeys\n        _node.forEach(item => {\n          var obj = {};\n          obj.authorizationId = item.id;\n          obj.type = 1;\n          this.rollArr1.push(obj);\n        });\n        this.rollArr = this.rollArr1.concat(this.rollArr2);\n      },\n      //内容复选框，当内容资源点击的时候，数据改变获取实时的数据\n      handleCheck(arr1, arr2) {\n        this.rollArr2 = [];\n        var _node = arr2.checkedNodes; //当前选中状态的全部节点\n        _node.forEach(item => {\n          var obj = {};\n          obj.authorizationId = item.id;\n          obj.type = 2;\n          this.rollArr2.push(obj);\n        });\n        this.rollArr = this.rollArr1.concat(this.rollArr2);\n      },\n      //功能权限查看功能\n      search() {\n        API.Jurisdiction({\n          partyschoolId: this.id,\n          type: \"1\",\n          resourcesType: \"1\",\n          sourceType: \"\"\n        }).then(res => {\n          if (res.code === 200) {\n            this.data2 = res.result;\n            this.filters.column.create_start_date = res.result[0].startDate;\n            this.filters.column.create_end_date = res.result[0].endDate;\n            //查看功能里授权的内容，mark标识符，并取出来\n            //查看二级菜单里的mark值，并取出id\n            var arr = [];\n            var arr1 = [];\n            this.data2.forEach(item => {\n              if (item.children.length) {\n                item.children.forEach(items => {\n                  if (items.mark) {\n                    arr.push(items.id);\n                  }\n                });\n              }\n            });\n            //查看只有一级菜单的时候，并取出有mark值的id\n            this.data2.forEach(val => {\n              if (!val.children.length) {\n                if (val.mark) {\n                  arr1.push(val.id);\n                }\n              }\n            });\n            this.gongNeng = arr.concat(arr1);\n            this.rollArr1 = [];\n            this.gongNeng.forEach(item => {\n              this.rollArr1.push({\n                authorizationId: item,\n                type: \"1\"\n              });\n            });\n            this.rollArr = this.rollArr1.concat(this.rollArr2);\n          }\n        });\n      },\n      //点击按钮授权\n      powerSubmit() {\n        if (\n          this.filters.column.create_start_date &&\n          this.filters.column.create_end_date\n        ) {\n          if (this.flag) {\n            this.flag = false;\n            API.shouQuan({\n              data: this.rollArr,\n              partyschoolId: this.id,\n              startDate: this.filters.column.create_start_date,\n              endDate: this.filters.column.create_end_date\n            }).then(res => {\n              if (res.code === 200) {\n                this.$router.push(\"empower\");\n                this.$message({\n                  message: \"授权成功!\",\n                  type: \"success\"\n                });\n                this.monitorActivate()\n                this.flag = true;\n              } else {\n                this.$message({\n                  message: \"授权失败!\",\n                  type: \"warning\"\n                });\n              }\n            });\n          }\n        } else {\n          this.$message({\n            message: \"请输入授权期限\",\n            type: \"warning\"\n          });\n        }\n      },\n      //回退的方法\n      goBack() {\n        this.$router.go(-1);\n      },\n      //搜所功能的方法\n      filterNode(value, data) {\n        if (!value) return true;\n        return data.label.indexOf(value) !== -1;\n      },\n      //功能板块的取消按钮\n      resetChecked() {\n        this.$refs.trees.setCheckedKeys([]);\n        this.rollArr1 = [];\n        this.rollArr = this.rollArr1.concat(this.rollArr2);\n      },\n      //功能板块的全选按钮\n      resetCheckedAll() {\n        API.Jurisdiction({\n          partyschoolId: this.id,\n          type: \"1\",\n          resourcesType: \"1\",\n          sourceType: \"\"\n        }).then(res => {\n          var arr = [];\n          var arr1 = [];\n          var arr2 = [];\n          //只获取一级菜单的id\n          res.result.forEach(item => {\n            var obj = {};\n            arr.push(item.id);\n            obj.authorizationId = item.id;\n            obj.type = 1;\n            arr1.push(obj);\n          });\n          //获取二级菜单的id\n          res.result.forEach(item => {\n            if (item.children.length) {\n              item.children.forEach(items => {\n                var obj = {};\n                obj.authorizationId = items.id;\n                obj.type = 1;\n                arr2.push(obj);\n              });\n            }\n          });\n          this.rollArr1 = arr1.concat(arr2);\n          this.rollArr = this.rollArr1.concat(this.rollArr2);\n          //全选\n          this.$refs.trees.setCheckedKeys(arr);\n        });\n      }\n    },\n    components: {\n      commonBread\n    },\n    created() {\n      this.demo();\n      this.getData();\n      this.search();\n      this.search1();\n    }\n  };\n</script>\n\n<style lang=\"less\" scoped>\n  @import \"../../style/mix\";\n  @import \"../../style/magTable\";\n  .during {\n    .wh(100%, 60px);\n    overflow: hidden;\n    border-bottom: 1px solid #f5f5f5;\n    padding: 10px 0 0 15px;\n    box-sizing: border-box;\n  }\n  .function {\n    border-bottom: 1px solid #f5f5f5;\n    h3 {\n      .ft(15px, 60px);\n      color: #333333;\n      padding-left: 18px;\n    }\n    .tabBor {\n      padding: 0 95px 30px;\n      box-sizing: border-box;\n    }\n  }\n  .content {\n    h3 {\n      .ft(15px, 60px);\n      color: #333333;\n      padding-left: 18px;\n    }\n    .treeBor {\n      padding: 0 95px 0px;\n      box-sizing: border-box;\n    }\n  }\n  #tree {\n    margin-top: 20px;\n    margin-left: 94px;\n  }\n  .anNiu {\n    margin-top: -45px;\n    margin-left: 95px;\n  }\n  #quanxuan {\n    padding: 8px 23px;\n  }\n</style>\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/party/power.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"powerBor\"},[_c('div',{staticClass:\"crumbs\"},[_c('common-bread')],1),_vm._v(\" \"),_c('div',{staticClass:\"user\"},[_c('p',{staticClass:\"titleBar\"},[_vm._v(\"\\n      党校授权\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"during\"},[_c('el-form',{ref:\"form\",staticStyle:{\"color\":\"#999999\"},attrs:{\"label-width\":\"80px\"}},[_c('el-form-item',{staticStyle:{\"display\":\"inline-block\",\"color\":\"#999999\"},attrs:{\"label\":\"授权期限 : \"}},[_c('el-date-picker',{attrs:{\"value-format\":\" yyyy-MM-dd\",\"id\":\"date1\",\"type\":\"date\",\"size\":\"small\",\"picker-options\":_vm.pickerBeginDateBefore,\"format\":\"yyyy-MM-dd\"},on:{\"change\":function($event){_vm.filters.column.create_start_date=$event}},model:{value:(_vm.filters.column.create_start_date),callback:function ($$v) {_vm.$set(_vm.filters.column, \"create_start_date\", $$v)},expression:\"filters.column.create_start_date\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"display\":\"inline-block\",\"color\":\"#999999\"},attrs:{\"label\":\"至\",\"label-width\":\"25px\"}},[_c('el-date-picker',{attrs:{\"value-format\":\" yyyy-MM-dd\",\"id\":\"date2\",\"type\":\"date\",\"size\":\"small\",\"format\":\"yyyy-MM-dd\",\"picker-options\":_vm.pickerBeginDateAfter},on:{\"change\":function($event){_vm.filters.column.create_end_date=$event}},model:{value:(_vm.filters.column.create_end_date),callback:function ($$v) {_vm.$set(_vm.filters.column, \"create_end_date\", $$v)},expression:\"filters.column.create_end_date\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"function\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"anNiu\"},[_c('el-button',{attrs:{\"round\":\"\",\"type\":\"primary\",\"id\":\"quanxuan\"},on:{\"click\":_vm.resetCheckedAll}},[_vm._v(\"全选\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"round\":\"\",\"id\":\"quanxuan\"},on:{\"click\":_vm.resetChecked}},[_vm._v(\"清空\")])],1),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"tree\"}},[_c('el-tree',{ref:\"trees\",attrs:{\"data\":_vm.data2,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-checked-keys\":_vm.gongNeng,\"props\":_vm.defaultProps},on:{\"check\":_vm.handleSelectionChange}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('h3',[_vm._v(\"内容资源 :\")]),_vm._v(\" \"),_c('div',{staticClass:\"treeBor\"},[_c('el-input',{attrs:{\"placeholder\":\"输入关键字进行过滤\"},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}}),_vm._v(\" \"),_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.data3,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-checked-keys\":_vm.content,\"props\":_vm.defaultProps,\"filter-node-method\":_vm.filterNode},on:{\"check\":_vm.handleCheck}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"submit\"},[_c('button',{on:{\"click\":_vm.powerSubmit}},[_vm._v(\"授 权\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.goBack}},[_vm._v(\"取 消\")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',[_vm._v(\"功\"),_c('span',{staticStyle:{\"display\":\"inline-block\",\"width\":\"30px\"}}),_vm._v(\"能 :\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3d8ba340\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/party/power.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3d8ba340\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./power.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./power.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./power.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3d8ba340\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./power.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3d8ba340\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/party/power.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}