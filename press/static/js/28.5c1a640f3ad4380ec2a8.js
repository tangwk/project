webpackJsonp([28],{Luci:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=s("JVB/");var t={name:"login",data:function(){return{ispwd:!0,loginForm:{username:"",password:""},remberPass:"",loginFormRules:{username:[{required:!0,message:"请输入登录名",trigger:"blur"},{min:4,message:"长度大于4个字符",trigger:"change"}]}}},mounted:function(){if(this.hoverGradient(),"true"===localStorage.getItem("remberPass")){var e=new Base64;this.loginForm.username=localStorage.getItem("userId"),this.loginForm.password=e.decode(localStorage.getItem("password")),this.remberPass=localStorage.getItem("remberPass")}else this.userId="",this.passwd="",this.remberPass=""},watch:{username:function(e){this.loginForm.password=""}},methods:{loginU:function(){""==this.loginForm.username&&(this.loginForm.password="")},hoverGradient:function(){document.querySelector(".loginBtn").onmousemove=function(e){var r=e.pageX-e.target.offsetLeft,s=e.pageY-e.target.offsetTop;e.target.style.setProperty("--x",r+"px"),e.target.style.setProperty("--y",s+"px")}},login:function(){var e=this;this.$refs.loginFormRef.validate(function(r){if(!r)return e.$message.error("请填写完整的登录信息！");var s;(s={userId:e.loginForm.username,password:e.loginForm.password,userType:"1"},o.a.post("/loginUser",s)).then(function(r){if(200===r.code){var s=new Base64,o=r.result;sessionStorage.setItem("token",o.token),localStorage.setItem("userId",e.loginForm.username),localStorage.setItem("userName",o.username),localStorage.setItem("password",s.encode(e.loginForm.password)),localStorage.setItem("remberPass",e.remberPass),e.$router.push("/layout")}else"密码错误!"===r.massege?(e.$message({message:"密码错误!",type:"warning"}),e.loginForm.password=""):"用戶不存在"===r.massege&&(e.$message({message:"用戶不存在",type:"warning"}),e.loginForm.password="",e.loginForm.username="")})})}}},a={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"loginBor"},[s("div",{staticClass:"userBox"},[e._m(0),e._v(" "),s("el-form",{ref:"loginFormRef",attrs:{model:e.loginForm,rules:e.loginFormRules}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"登录名称"},on:{change:e.loginU},model:{value:e.loginForm.username,callback:function(r){e.$set(e.loginForm,"username",r)},expression:"loginForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{placeholder:"登录密码",type:e.ispwd?"password":"text"},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}})],1),e._v(" "),s("div",{staticClass:"check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.remberPass,expression:"remberPass"}],attrs:{type:"checkbox",name:"checkbox"},domProps:{checked:Array.isArray(e.remberPass)?e._i(e.remberPass,null)>-1:e.remberPass},on:{change:function(r){var s=e.remberPass,o=r.target,t=!!o.checked;if(Array.isArray(s)){var a=e._i(s,null);o.checked?a<0&&(e.remberPass=s.concat([null])):a>-1&&(e.remberPass=s.slice(0,a).concat(s.slice(a+1)))}else e.remberPass=t}}}),e._v(" "),s("label",{attrs:{for:"checkbox"}},[e._v("记住用户名和密码")])]),e._v(" "),s("el-row",[s("el-col",[s("el-button",{staticClass:"loginBtn",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("h3",{staticClass:"userTitle"},[r("i",{staticClass:"iconfont icon-renminchubansheguanlihoutaizhuanhuan"})])}]};var n=s("C7Lr")(t,a,!1,function(e){s("Xp18")},"data-v-567ee7f1",null);r.default=n.exports},Xp18:function(e,r){}});
//# sourceMappingURL=28.5c1a640f3ad4380ec2a8.js.map