webpackJsonp([24],{"6axD":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("IvJb"),i=a("Osha"),n=a("dC0T"),s=a("/p82");r.default.filter("dateFormat",function(t){var e=new Date(parseInt(t));return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")});var o={name:"articleModify",data:function(){return{artName:"",subName:"",artAuthor:"",artTime:"",artContent:"",defaultMsg:"",config:{initialFrameWidth:null,initialFrameHeight:350},editor:null}},methods:{toLook:function(){var t=this;s.a.getArticleList({type:"1",id:this.reportID,partyschoolId:"",title:this.artName,content:this.artContent,startDate:"",endDate:"",pageNum:"",pageSize:""}).then(function(e){var a=e.result[0];t.artName=a.title,t.subName=a.subtitle,t.artAuthor=a.author,t.artTime=t.formatDate(a.releaseTime),t.artContent=a.content,t.defaultMsg=a.content}).catch(function(t){})},handleReady:function(t){this.editor=t},save:function(){var t=this,e=this.editor.getContent();this.artContent=e;var a=this;this.$validator.validateAll().then(function(e){e&&s.a.updateArticle({id:t.reportID,title:a.artName,content:a.artContent,subtitle:a.subName,author:a.artAuthor,releaseTime:a.artTime,releaseId:localStorage.getItem("userId"),releaseName:localStorage.getItem("userName"),mark:"0",type:1}).then(function(e){t.$router.push("/layOut/article?currentPage="+t.$route.query.currentPage)})})},goBack:function(){this.$router.push("/layOut/article?currentPage="+this.$route.query.currentPage)},formatDate:function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var i=e.getDate();return a+"-"+r+"-"+(i=i<10?"0"+i:i)+" "}},created:function(){this.reportID=this.$route.query.reportID,this.toLook()},mounted:function(){},components:{commonBread:i.a,UE:n.a}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"boxBor"},[a("div",{staticClass:"crumbs"},[a("common-bread")],1),t._v(" "),a("div",{staticClass:"user"},[a("p",{staticClass:"titleBar"},[t._v("\n      文章修改\n    ")]),t._v(" "),a("ul",{staticClass:"newsBor"},[a("li",[t._m(0),t._v(" "),a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":t.errors.has("artTitle")},attrs:{name:"artTitle",id:"title"},model:{value:t.artName,callback:function(e){t.artName=e},expression:"artName"}}),t._v(" "),a("p",{staticClass:"hint"},[t._v(" "+t._s(t.errors.first("artTitle"))+" ")])],1),t._v(" "),a("li",[t._m(1),t._v(" "),a("el-input",{attrs:{id:"title"},model:{value:t.subName,callback:function(e){t.subName=e},expression:"subName"}})],1),t._v(" "),a("li",{staticClass:"clear"},[a("div",{staticClass:"left"},[t._m(2),t._v(" "),a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":t.errors.has("authorName")},attrs:{id:"title",name:"authorName"},model:{value:t.artAuthor,callback:function(e){t.artAuthor=e},expression:"artAuthor"}}),t._v(" "),a("p",{staticClass:"hint"},[t._v(" "+t._s(t.errors.first("authorName"))+" ")])],1),t._v(" "),a("div",{staticClass:"right"},[a("label",{attrs:{for:"time"}},[t._v("发布时间 :")]),t._v(" "),a("span",[t._v(t._s(t._f("dateFormat")(Date.now())))])])]),t._v(" "),a("li",[t._m(3),t._v(" "),a("div",{staticClass:"editor"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.artContent,expression:"artContent"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{input:!0,"is-danger":t.errors.has("artContent")},attrs:{type:"hidden",name:"artContent"},domProps:{value:t.artContent},on:{input:function(e){e.target.composing||(t.artContent=e.target.value)}}}),t._v(" "),a("UE",{ref:"ue",attrs:{config:t.config,defaultMsg:t.defaultMsg},on:{onready:t.handleReady}})],1),t._v(" "),a("p",{staticClass:"hint"},[t._v(" "+t._s(t.errors.first("artContent"))+" ")])]),t._v(" "),a("li",{staticClass:"submit"},[a("button",{on:{click:t.save}},[t._v("保 存")]),t._v(" "),a("button",{on:{click:t.goBack}},[t._v("取 消")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"title"}},[e("i",{staticClass:"iconfont icon-xinghao"}),this._v("文章标题 :")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"title"}},[e("span",{staticStyle:{display:"inline-block",width:"24px"}}),this._v("副"),e("span",{staticStyle:{display:"inline-block",width:"6.5px"}}),this._v("标"),e("span",{staticStyle:{display:"inline-block",width:"6.5px"}}),this._v("题 :")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"author"}},[e("i",{staticClass:"iconfont icon-xinghao"}),this._v("作"),e("span",{staticStyle:{display:"inline-block",width:"28px"}}),this._v("者 :")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"content"}},[e("i",{staticClass:"iconfont icon-xinghao"}),this._v("发布内容 :")])}]};var u=a("C7Lr")(o,l,!1,function(t){a("WJTY")},"data-v-645042f7",null);e.default=u.exports},WJTY:function(t,e){}});
//# sourceMappingURL=24.b358e18d86f0fa381bac.js.map