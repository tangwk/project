webpackJsonp([39],{"0Ctw":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Osha"),n=r("r7iS"),s={name:"Todo",data:function(){return{resource:"",todoData:[],multipleSelection:[],currentPage:1,total:null}},watch:{resource:function(e){""===e&&this.search()}},methods:{search:function(){var e=this;this.todoData=[],n.a.getTodoList({id:"",resourcesName:this.resource,status:"2",pageNum:this.currentPage,pageSize:10}).then(function(t){var r=t.result;r&&(r.forEach(function(t){t.resource=t.resourcesName,t.sendTime=e.formatDate(t.createDate),t.submitter=t.createrName,t.reportID=t.resourcesId}),e.todoData=r),t.number&&(e.total=t.number)}).catch(function(e){})},lookDetail:function(e,t){"3"===t.resourcesType&&this.$router.push({name:"todoArtDetails",query:{reportID:t.reportID,currentPage:this.currentPage}}),"2"===t.resourcesType&&this.$router.push({name:"todoVidDetails",query:{reportID:t.reportID,currentPage:this.currentPage}})},handleSelectionChange:function(e){this.multipleSelection=e},handleAgree:function(e,t){var r=this;n.a.agreeTodo({data:[{resourcesId:t.resourcesId,resourcesType:t.resourcesType,status:1,opinion:""}]}).then(function(e){r.search()})},handleAgreeAll:function(){var e=this,t=[];this.multipleSelection.map(function(e){var r={};r.id=e.id,r.status=1,r.resourcesId=e.resourcesId,r.resourcesType=e.resourcesType,r.opinion=e.opinion,t.push(r)}),n.a.agreeTodo({data:t}).then(function(t){e.search()})},handleDisagree:function(e,t){console.log(t.resourcesType),"3"===t.resourcesType&&this.$router.push({name:"todoArtDetails1",query:{reportID:t.reportID,currentPage:this.currentPage}}),"2"===t.resourcesType&&this.$router.push({name:"todoVidDetails1",query:{reportID:t.reportID,currentPage:this.currentPage}})},handleCurrentChange:function(e){this.currentPage=e,this.search()},formatDate:function(e){var t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var n=t.getDate();return r+"-"+a+"-"+(n=n<10?"0"+n:n)+" "}},created:function(){this.$route.query.currentPage&&(this.currentPage=Number(this.$route.query.currentPage)),this.search()},components:{commonBread:a.a}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"boxBor"},[r("div",{staticClass:"crumbs"},[r("common-bread")],1),e._v(" "),r("div",{staticClass:"user"},[r("p",{staticClass:"titleBar"},[e._v("\n      资源审批\n    ")]),e._v(" "),r("div",{staticClass:"userListBor"},[r("div",{staticClass:"userList clear"},[r("div",{staticClass:"actBtn left"},[r("button",{staticClass:"newAdd",attrs:{disabled:0==e.multipleSelection.length},on:{click:e.handleAgreeAll}},[e._v("批量通过")])]),e._v(" "),r("ul",{staticClass:"fillIn right"},[r("li",[e._m(0),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.resource,expression:"resource"}],attrs:{type:"text",size:"small",name:"keyword",placeholder:"按资源搜索"},domProps:{value:e.resource},on:{input:function(t){t.target.composing||(e.resource=t.target.value)}}})]),e._v(" "),r("li",[r("button",{on:{click:e.search}},[e._v("搜 索")])])])]),e._v(" "),r("el-table",{ref:"singleTable",attrs:{data:e.todoData,"highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{width:"80",align:"center",type:"selection"}}),e._v(" "),r("el-table-column",{attrs:{property:"resource",label:"待审批资源",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{property:"sendTime",label:"发送时间",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{property:"submitter",label:"提交人",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",{staticStyle:{"font-size":"14px"},on:{click:function(r){e.lookDetail(t.$index,t.row)}}},[e._v("详情")]),e._v(" "),r("i",{staticStyle:{"font-size":"14px"},on:{click:function(r){e.handleAgree(t.$index,t.row)}}},[e._v("同意")]),e._v(" "),r("i",{staticStyle:{"font-size":"14px"},on:{click:function(r){e.handleDisagree(t.$index,t.row)}}},[e._v("不同意")])]}}])})],1),e._v(" "),e.total>1?r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1):e._e()],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"keyword"}},[t("span",{staticStyle:{display:"inline-block",width:"0.2rem"}}),this._v("关\n              "),t("span",{staticStyle:{display:"inline-block",width:"0.26rem"}}),this._v("键\n              "),t("span",{staticStyle:{display:"inline-block",width:"0.26rem"}}),this._v("字 :\n              "),t("span",{staticStyle:{display:"inline-block",width:"0.18rem"}})])}]};var i=r("C7Lr")(s,o,!1,function(e){r("sejk")},"data-v-3cf4d6d2",null);t.default=i.exports},sejk:function(e,t){}});
//# sourceMappingURL=39.aceb6d9513f3964b7d9e.js.map